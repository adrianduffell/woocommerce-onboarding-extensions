!function(){"use strict";var e={n:function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(r,{a:r}),r},d:function(n,r){for(var c in r)e.o(r,c)&&!e.o(n,c)&&Object.defineProperty(n,c,{enumerable:!0,get:r[c]})},o:function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}};let n={sessionId:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}))};const r=e=>{const{navigator:n,screen:r}=window||{},{language:c,userAgent:t}=n||{},{colorDepth:i,height:a,width:o}=r||{};return{device_id:e,screen_height:a,screen_width:o,screen_color_depth:i,language:c,timezone:(new Date).getTimezoneOffset(),browser:{java_enabled:n?.javaEnabled(),javascript_enabled:!0,user_agent:t}}},c=()=>{const e=navigator.language||navigator.userLanguage,n=e.split("-")[0];return"zh"!==n||"zh-HK"!==e&&"zh-TW"!==e?n:"zh-HK"};var t=window.jQuery,i=e.n(t);const a=e=>awxEmbeddedLPMData.ajaxUrl.toString().replace("%%endpoint%%","airwallex_"+e);jQuery((function(e){let t="",o="",l={},u=!1;const w=function(n,r){u=!0,f(!0),_(!0),d(),((e,n)=>i().ajax({type:"POST",data:{payment_currency:e,target_currency:n,security:awxEmbeddedLPMData.nonce.createQuoteCurrencySwitcher},url:a("currency_switcher_create_quote")}))(n,r).done((function(c){const{quote:t}=c,{currencyIneligibleCWOff:i,currencyIneligibleCWOn:a,conversionRate:o,convertedAmount:u}=awxEmbeddedLPMData.textTemplate;if(t){l=t;const r={$$original_currency$$:n,$$conversion_rate$$:t.clientRate,$$converted_currency$$:t.targetCurrency,$$converted_amount$$:t.targetAmount};e(".wc-airwallex-currency-switching-base-amount").html(t.paymentAmount),e(".wc-airwallex-currency-switching-convert-text").html("").append(m(o,r)),e(".wc-airwallex-currency-switching-converted-amount").html("").append(m(u,r)),e(".wc-airwallex-currency-switching-quote-expire-convert-text").html("").append(m(a,r)),e(".wc-airwallex-lpm-currency-ineligible-switcher-on div").html(m(a,r)),e(".wc-airwallex-lpm-currency-ineligible-switcher-on").show(),s(),f(!1),_(!1)}else{p();const c={$$original_currency$$:n,$$converted_currency$$:r};e(".woocommerce-checkout .wc-airwallex-alert-box").hide(),e(".wc-airwallex-lpm-currency-ineligible-switcher-off div").html(m(i,c)),e(".wc-airwallex-lpm-currency-ineligible-switcher-off").show(),f(!0)}})).fail((function(e){p()})).always((function(){u=!1,x()}))},d=function(){e(".wc-airwallex-loader").show()},x=function(){e(".wc-airwallex-loader").hide()},s=function(){e(".wc-airwallex-currency-switching").show()},p=function(){e(".wc-airwallex-currency-switching").hide()},h=function(){e(".wc-airwallex-currency-switching-quote-expire").show(),e(".wc-airwallex-currency-switching-quote-expire-mask").show()},m=function(e,n){for(const r in n)e=e.replace(r,n[r]);return e},g=function(){return e("#billing_country").val()},y=function(){const n=e('.woocommerce-checkout input[name="payment_method"]:checked').attr("id");return n?n.replace("payment_method_",""):""},f=function(n){e(".woocommerce-checkout #place_order").prop("disabled",n)},_=function(n){n?e(".wc-airwallex-currency-switching-quote-expire-place-order-mask").show():e(".wc-airwallex-currency-switching-quote-expire-place-order-mask").hide()},b=function(){e(document.body).on("country_to_state_changed payment_method_selected updated_checkout",(function(){p(),e(".woocommerce-checkout .wc-airwallex-alert-box").hide();const n=function(){let n=!0;const r=g(),c=y();if(c in awxEmbeddedLPMData){const{availableCurrencies:i}=awxEmbeddedLPMData,{supportedCountryCurrency:a}=awxEmbeddedLPMData[c],{currencyIneligibleCWOff:l}=awxEmbeddedLPMData.textTemplate;if(r in a){o=a[r];const c={$$original_currency$$:t,$$converted_currency$$:o};t===o||(i&&i.includes(o)?w(t,o):(n=!1,e(".wc-airwallex-lpm-currency-ineligible-switcher-off div").html(m(l,c)),e(".wc-airwallex-lpm-currency-ineligible-switcher-off").show()))}else n=!1,e(".wc-airwallex-lpm-country-ineligible").show()}return n}();f(!n||u)}));let i=0;const a="firedByAirwallex";e(document.body).on("click","#place_order",(function(n,r){i<3&&(!r||!r.includes(a))&&y()in awxEmbeddedLPMData&&(n.preventDefault(),(0===Object.keys(l).length||l&&l.refreshAt&&new Date(l.refreshAt).getTime()>=(new Date).getTime()?Promise.resolve(!0):(w(t,o),h(),e(".wc-airwallex-currency-switching-quote-expire-close").off("click"),e(".wc-airwallex-currency-switching-quote-expire-place-back").off("click"),e(".wc-airwallex-currency-switching-quote-expire-place-order").off("click"),new Promise((function(n,r){e(".wc-airwallex-currency-switching-quote-expire-close, .wc-airwallex-currency-switching-quote-expire-place-back").on("click",(function(){r(!1)})),e(".wc-airwallex-currency-switching-quote-expire-place-order").on("click",(function(){n(!0)}))})))).then((function(n){e("#place_order").trigger("click",[a]),i++})).catch((function(e){console.warn(e)})).finally((function(){e(".wc-airwallex-currency-switching-quote-expire").hide(),e(".wc-airwallex-currency-switching-quote-expire-mask").hide()})))})),e("form.woocommerce-checkout").on("checkout_place_order",(function(t,i){var a;return y()in awxEmbeddedLPMData&&(a=i.$checkout_form,e("<input>").prop({type:"hidden",id:"airwallex_device_data",name:"airwallex_device_data",value:JSON.stringify(r(n.sessionId))}).appendTo(a),e("<input>").prop({type:"hidden",id:"airwallex_origin",name:"airwallex_origin",value:window.location.origin}).appendTo(a),e("<input>").prop({type:"hidden",id:"airwallex_target_currency",name:"airwallex_target_currency",value:o}).appendTo(a),e("<input>").prop({type:"hidden",id:"airwallex_browser_language",name:"airwallex_browser_language",value:c()}).appendTo(a)),!0}))};if(awxEmbeddedLPMData&&awxCommonData){const{env:n,locale:r}=awxCommonData;((e,n,r)=>{const c=setInterval((()=>{window.Airwallex&&(clearInterval(c),Airwallex.init({env:e,locale:n,origin:window.location.origin}),r())}),1e3)})(n,r,(()=>{})),i().ajax({type:"GET",data:{security:awxEmbeddedLPMData.nonce.getStoreCurrency},url:a("get_store_currency")}).done((function(e){t=e.currency,b()})),e("#wc-airwallex-quote-expire-confirm").text(e("#place_order").text())}}))}();